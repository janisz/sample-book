\chapter{The first chapter}
\label{cha:a_chapter}

This is the first paragraph of the Softcover Markdown template produced with the \softcover\ command-line interface. It shows how to write a document in Markdown, a lightweight markup language, augmented with the \href{http://kramdown.gettalong.org/}{kramdown} converter and some custom extensions, including support for embedded \PolyTeX, a subset of the powerful \LaTeX\ typesetting system.\footnote{Pronunciations of {}``LaTeX{}'' differ, but \emph{lay}-tech is the one I prefer.} For more information, see \href{http://manual.softcover.io/book}{\emph{The Softcover Book}}. To learn how to easily publish (and optionally sell) documents produced with Softcover, visit \href{http://softcover.io/}{Softcover.io}.

This is the \emph{second} paragraph, showing how to emphasize text.\footnote{This is a footnote. It is numbered automatically.} You can also make text \textbf{bold} or \emph{emphasize a second way}. Via embedded \PolyTeX, Softcover also supports colored text, such as \coloredtext{red}{red}, \coloredtext{CornflowerBlue}{cornflower blue}, and \coloredtexthtml{E8AB3A}{arbitrary HTML colors}.

\section{A section}

\label{sec:a_section}

This is a section. You can refer to it using the \LaTeX\ cross-reference syntax, like so: Section~\ref{sec:a_section}.

\subsection{Source code}

This is a subsection.

You can typeset code samples and other verbatim text using four spaces of indentation:

\begin{verbatim}
def hello
  puts "hello, world"
end
\end{verbatim}

Softcover also comes with full support for syntax-highlighted source code using kramdown{}'s default syntax, which combines the language name with indentation:

%= lang:ruby
\begin{code}
def hello
  puts "hello, world"
end
\end{code}

Softcover{}'s Markdown mode also extends kramdown to support so-called {}``code fencing{}'' from GitHub-flavored Markdown:

%= lang:ruby
\begin{code}
def hello
  puts "hello, world!"
end
\end{code}

The last of these can be combined with \PolyTeX{}'s \kode{codelisting} environment to make code listings with linked cross-references (Listing~\ref{code:hello}).

\begin{codelisting}
\codecaption{Hello, world.}
\label{code:hello}
%= lang:ruby
\begin{code}
def hello
  puts "hello, world!"
end
\end{code}
\end{codelisting}

\subsection{Mathematics}

Softcover{}'s Markdown mode supports mathematical typesetting using \LaTeX\ syntax, including inline math, such as \( \phi^2 - \phi - 1 = 0, \) and centered math, such as
\[ \phi = \frac{1+\sqrt{5}}{2}. \]
It also supports centered equations with linked cross-reference via embedded \PolyTeX\ (Eq.~\eqref{eq:phi}).

\begin{equation}
\label{eq:phi}
\phi = \frac{1+\sqrt{5}}{2}
\end{equation}

Softcover also supports an alternate math syntax, such as \(\phi^2 - \phi - 1 = 0\), and centered math, such as

\[\phi = \frac{1+\sqrt{5}}{2}.\]

The \LaTeX\ syntax is strongly preferred, but the alternate syntax is included for maximum compatibility with other systems.




\subsection{Exercises}

\beforeFirstExercises{ch1}

\begin{exercises}{ch1}

	\begin{exercise} 
		Do the following vectors represent probability distributions?
		\begin{exparts*}
			\partsitem	$\left(\tfrac{1}{2}, \tfrac{1}{2}, \tfrac{1}{2} \right)^T$
			\partsitem	$\left(\tfrac{1}{4}, \tfrac{1}{4}, \tfrac{1}{4}, \tfrac{1}{4} \right)^T$
			\partsitem	$\left(0.3, 0.3, -0.1, 0.5  \right)^T$
		\end{exparts*}

		\begin{eanswer}\begin{ansparts*}
					\partsitem No; weights don't add to one.
					\partsitem Yes.
					\partsitem No; contains a negative number.
					\end{ansparts*}\end{eanswer}

		\begin{esolution}
			In each case we check if each probability weight is positive and
			the total probability sums to one.
		\end{esolution}
	\end{exercise}

\end{exercises}

\afterLastExercises{ch1}



\section{Images and tables}

This is the second section.

Softcover supports the inclusion of images, like this:

\image{images/figures/conic_sections_four-shapes.png}

Using \LaTeX\ labels, you can also include a caption (as in Figure~\ref{fig:captioned_image}) or just a figure number (as in Figure~\ref{fig:figure_number}).

\begin{figure}[H]
\begin{center}
\image{images/figures/conic_sections_four-shapes.png}
\end{center}
\caption{The four conic sections.\label{fig:captioned_image}}

\end{figure}

\begin{figure}[H]
\begin{center}
\image{images/figures/conic_sections_four-shapes.png}
\end{center}
\caption{\label{fig:figure_number}}

\end{figure}

\subsection{Tables}

Softcover supports raw tables via a simple table syntax:

\begin{longtable}{|l|l|l|l|}
\hline
\textbf{HTTP request} & \textbf{URL} & \textbf{Action} & \textbf{Purpose}\\
\kode{GET} & /users & \kode{index} & page to list all users\\
\kode{GET} & /users/1 & \kode{show} & page to show user with id \kode{1}\\
\kode{GET} & /users/new & \kode{new} & page to make a new user\\
\kode{POST} & /users & \kode{create} & create a new user\\
\kode{GET} & /users/1/edit & \kode{edit} & page to edit user with id \kode{1}\\
\kode{PATCH} & /users/1 & \kode{update} & update user with id \kode{1}\\
\kode{DELETE} & /users/1 & \kode{destroy} & delete user with id \kode{1}\\
\hline
\end{longtable}

See \href{http://manual.softcover.io/book/softcover_markdown#sec-embedded_tabular_and_tables}{\emph{The Softcover Book}} to learn how to make more complicated tables.

\section{Command-line interface}

Softcover comes with a command-line interface called \kode{softcover}. To get more information, just run \kode{softcover help}:

%= lang:console
\begin{code}
$ softcover help
Commands:
  softcover build, build:all           # Build all formats
  softcover build:epub                 # Build EPUB
  softcover build:html                 # Build HTML
  softcover build:mobi                 # Build MOBI
  softcover build:pdf                  # Build PDF
  softcover build:preview              # Build book preview in all formats
  .
  .
  .
\end{code}

\noindent You can run \kode{softcover help \textless{}command\textgreater{}} to get additional help on a given command:

%= lang:console
\begin{code}
$ softcover help build
Usage:
  softcover build, build:all

Options:
  -q, [--quiet]   # Quiet output
  -s, [--silent]  # Silent output

Build all formats
\end{code}

\section{Miscellanea}

This is the end of the template---apart from two mostly empty chapters. In fact, letâ€™s include the last chapter in its entirety, just to see how mostly empty it is:
%= <<(chapters/yet_another_chapter.tex, lang: text)

Visit \href{http://manual.softcover.io}{\emph{The Softcover Book}} to learn more about what Softcover can do.




\section{Probability problems}

\begin{problems}{ch1}

	\begin{problem}		\label{problem:geometric_distr_biased_coin_until_heads}
		You have a biased coin which lands on \texttt{heads} with probability $p$,
		and consequently lands on \texttt{tails} with probability $(1-p)$.
		Suppose you want to flip the coin until you get \texttt{heads}.
		Define the random variable $N$ as the number of tosses required until the first \texttt{heads} outcome.
		What is the probability mass function $P_N(n)$ for success on the $n$\textsuperscript{th} toss?
		Confirm that the formula is a valid probability distribution by showing $\sum_{n=1}^\infty P_N(n) = 1$.

		\begin{hint}
			Find the probabilities for cases $n=1,2,3,\ldots$ and look for a pattern.
		\end{hint}

		\begin{answer}$P_N(n) = (1-p)^{n-1}p$\end{answer}

		\begin{solution}
			The biased coin flip is modelled by a random variable $Y$,
			and different coin flips correspond to random variables $Y_1$, $Y_2$, $Y_3$, \ldots which are independent copies of $Y$.
			The probability of getting \texttt{heads} on the first flip is $P_N(1)=\textrm{Pr}\!\left( \{ Y_1=\texttt{heads} \} \right)\! =p$.
			The probability of getting \texttt{heads} on the second flip corresponds
			to the event $\{Y_1=\texttt{tails}\} \ \texttt{AND} \ \{Y_2=\texttt{heads} \}$.
			We assumed the coin flips are independent so % the probability of this event is the product
			$P_N(2)=(1-p)p$.
			Similarly $P_N(3) = (1-p)^2p$.
			The general formula is $P_N(n) = (1-p)^{n-1}p$.
		\end{solution}
	\end{problem}


\end{problems}